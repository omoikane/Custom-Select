/**
 * Custom Select jQuery Plugin
 *
 * <description>
 *
 * @copyright Copyright 2010, Daniele De Nobili - www.metaline.it
 * @version 1.0
 */
(function($){$.fn.customselect=function(callback){return this.each(function(){var that=$(this),enhanced,box,ul,options='';that.hide().wrap('<div class="enhanced" />');enhanced=that.parent();enhanced.append('<div class="selectBox"><div class="selectContent"><div class="selectList"><span>'+$("option:selected",that).text()+'</span></div><span class="selectArrow"></span></div><ul></ul></div>');box=$(".selectBox",enhanced);$("option",that).each(function(){var t=$(this);options+='<li><a href="#"><span class="label">'+t.text()+'</span><span class="value" style="display: none;">'+t.attr("value")+'</span></a></li>'});ul=$("ul",enhanced);ul.append(options).data("closed",true);var w=that.outerWidth(),wa=$(".selectArrow",box).outerWidth();$("div.selectBox",box).css("width",w);$("div.selectList",box).css("width",w-wa);$("li",box).css("width",w-wa-1);$('li:first',box).addClass("first");$('li:last',box).addClass("last");$("div.selectList",box).click(function(){if(ul.data("closed")){ul.show();ul.data("closed",false)}$(document).click(function(e){if(ul.data("closed"))return false;var $target=$(e.target);if($target.is("span"))$target=$target.parent();if($target.parents("div.selectBox").length){var v=$("span.value",$target).text();var l=$("span.label",$target).text();if(v=='')return false;that.val(v);$("div.selectList span",box).text(l);if(typeof callback==='function'){callback(v,l)}}ul.hide();ul.data("closed",true);return false});return false})})}})(jQuery);